---
title: "[리눅스 - 쉘 프로그래밍] 2. Vim"
date: 2023-04-08 09:00:00 +0900
categories: [임베디드, 리눅스]
tags: [devrunner, imbedded, linux, shell programming, vim]
---

## Vim(Vi) 소개

---

**Vi**는 옛날에 마우스도 없던 시절 원활하게 코딩하기 위해서 만들어진 에디터다.
때문에 모든 작업들을 키보드만으로 수행할 수 있다.

**Vim**은 "**Vi improved**"라는 뜻으로, vi의 상위호환 버전이라고 생각하면 된다.
현재 리눅스 계열에서 널리 쓰이는 에디터가 바로 이 vim이기 때문에, 리눅스를 배운다면 vim을 배우는 것도 필수적이다.

여담이지만 필자는 오른팔을 계속해서 움직여야 하는 게 너무 귀찮았는데, vim을 쓰면 키보드 자판에서 손을 떼지 않아도 된다는 점에 혹해 배우게 되었고, 사용한지 1년이 조금 넘은 상태다.
처음 배울 때는 진입 장벽이 워낙 높아 사용할 수 있었던 단축키도 별로 없었고, 커서 이동도 매우 힘들어할 정도였는데, 지금은 vim 없이 코딩하는 게 더 어색하게 되어버린 상태다.

Vim 많이 쓰세요 Vim 좋음

## Vim의 기본적인 모드들

---

vim에는 여러 모드들이 있다.
이 모드들을 오가며 문서 편집을 한다.
주로 쓰이는 모드 4가지만 이해한다면 vim을 수월하게 다룰 수 있다.

---

### `Normal` 모드

---

기본 모드로, 단축키를 통해 커서 이동, 또는 문서 편집을 진행하는 모드다.

### `Insert` 모드

---

글자를 입력하는 모드다.

`i`를 통해 접근할 수 있으며, `<Esc>`를 눌러 나올 수 있다.

### 3. `Command-Line` 모드

---

명령어로 문서 접근, 편집, 저장 등을 할 수 있는 모드다.

`:`를 통해 접근할 수 있으며, 명령 실행 또는 `<Esc>`를 눌러 나올 수 있다.

### 4. `Visual` 모드

---

일반적인 텍스트 에디터에서 마우스 커서로 문자들을 긁는 것과 같은 역할을 하는 모드이다.

`v`를 통해 접근할 수 있으며, `v` 또는 `<Esc>`를 눌러 나올 수 있다.

## 저장,종료하기

---

| 명령어 |         기능          |
| :----: | :-------------------: |
|  `:q`  |         종료          |
| `:wq`  |     저장 후 종료      |
| `:q!`  | 저장 안하고 강제 종료 |

## 커서 이동

---

### 1. 기본 방향키

---

| 명령어 | 기능 |
| :----: | :--: |
|  `h`   |  ←   |
|  `j`   |  ↓   |
|  `k`   |  ↑   |
|  `l`   |  →   |

방향키 사용시 숫자 먼저 쓰고 방향키 쓰면 그 숫자만큼 해당방향만큼 간다.

- 예시

  `2h` -> 왼쪽으로 2칸 이동

### 2. 특수 이동

---

| 명령어 |               기능                |
| :----: | :-------------------------------: |
|  `w`   |   다음 단어의 시작부분으로 이동   |
|  `b`   |      w의 반대 방향으로 이동       |
|  `e`   | w와 같지만 단어의 끝부분으로 이동 |

대문자로 쓰면 공백 단위로 이동한다.

|  명령어   |             기능             |
| :-------: | :--------------------------: |
|    `0`    |        `HOME`키 역할         |
|    `$`    |         `END`키 역할         |
|    `^`    | 공백 제외 첫번째 문자로 이동 |
|   `gg`    |    문서의 첫 행으로 이동     |
|    `G`    |  문서의 마지막 행으로 이동   |
| `:(숫자)` |    해당 숫자 행으로 이동     |

## 검색

---

### 1. 문자 검색

---

|  명령어   |              기능              |
| :-------: | :----------------------------: |
| `f`(문자) |        해당 문자로 이동        |
| `t`(문자) |    해당 문자 앞 문자로 이동    |
|    `;`    |    그 다음 해당 문자로 이동    |
|    `,`    | 반대 방향으로 해당 문자로 이동 |

대문자 모드일 시 역방향으로 이동한다.

### 2. 단어 검색

---

|      명령어      |                    기능                     |
| :--------------: | :-----------------------------------------: |
|    `/(단어)`     |           해당 단어 검색 후 이동            |
|       `n`        |  (단어 검색 후 사용 가능) 다음 단어로 이동  |
| `(단어 위에서)*` | 해당 단어와 일치 하는 다음 단어로 바로 이동 |

`n`의 경우 문자 검색 때처럼 대문자로 명령시 반대로 이동한다.

`#`의 경우 `*`과 같은 기능이지만 검색 방향이 역방향이 검색한다.

## 스크롤

---

|   명령어   |           기능            |
| :--------: | :-----------------------: |
| `<Ctrl-e>` |       아래로 스크롤       |
| `<Ctrl-y>` |        위로 스크롤        |
| `<Ctrl-u>` |  반 페이지씩 위로 스크롤  |
| `<Ctrl-d>` | 반 페이지씩 아래로 스크롤 |

## 입력

---

| 명령어 |        기능         |
| :----: | :-----------------: |
|  `i`   | 현재 커서 앞에 입력 |
|  `a`   | 현재 커서 뒤에 입력 |

## 삭제,복사,붙여넣기

---

vim에서 삭제된 내용은 레지스터에 저장된다.
따라서 내용을 지우고 지운 내용을 바로 붙여넣기 할 수 있다.

### 1. 삭제

---

|     명령어     |                      기능                      |
| :------------: | :--------------------------------------------: |
|      `x`       |             현재 커서의 문자 삭제.             |
|   `d` or `c`   |                선택한 영역 삭제                |
|  `dd` or `cc`  |                  행 전체 삭제                  |
|   `D` or `C`   |          현재 위치부터 행 끝까지 삭제          |
| `diw` or `ciw` | 현재 커서가 위치한 단어 삭제 후 입력 모드 진입 |

### 2. 복사

---

| 명령어 |               기능                |
| :----: | :-------------------------------: |
|  `y`   |         선택한 영역 복사          |
|  `yy`  |           현재 행 복사            |
| `yiw`  | 현재 커서가 위치한 단어 바로 복사 |

### 3. 붙여넣기

---

| 명령어 |                          기능                           |
| :----: | :-----------------------------------------------------: |
|  `p`   | 레지스터에 저장된 내용을<br>현재 행 밑에 붙여넣기 한다. |
|  `P`   |                  현재 행 위에 붙여넣기                  |
| `"+p`  |            클립보드에 복사된 텍스트 붙여넣기            |
|  `J`   |              밑의 행을 현재 행 뒤에 붙여줌              |

## 작업취소,다시 실행,이전 명령어 반복하기

---

|   명령어   |           기능           |
| :--------: | :----------------------: |
|    `u`     |   이전 상태로 되돌리기   |
| `<Ctrl-r>` |  되돌린 작업 다시 실행   |
|    `.`     | 방금 했던 동작 다시 실행 |

vim은 실행 시작때부터 존재했던 모든 상태가 지속적으로 저장된다.
따라서 `u`를 계속 누르면 맨 처음 상태로 되돌아갈 수 있다.

## 비주얼 모드

---

|   명령어   |                                                       기능                                                       |
| :--------: | :--------------------------------------------------------------------------------------------------------------: |
|    `v`     |                                        비주얼 모드 진입(커서 드래그 기능)                                        |
|    `V`     |                                      비주얼 블럭 모드: 행 단위로 블럭 선택                                       |
| `<Ctrl-v>` |                                      비주얼 블럭 모드: 열 단위로 블럭 선택                                       |
|   `viw`    |                                          커서가 현재 위치하는 단어 선택                                          |
|   `vi(`    | 커서가 괄호 안에 위치할 때, 괄호 안의 모든 단어 선택<br>이를 응용해 쌍따옴표 등등 다른 기호에 대해서도 적용 가능 |

## 단어 한꺼번에 바꾸기

---

|               명령어               |      기능      |
| :--------------------------------: | :------------: |
| `:%s/(바꿀 단어)/(새로 쓸 단어)/c` | 바꿀 지 물어봄 |
| `:%s/(바꿀 단어)/(새로 쓸 단어)/g` |   바로 바꿈    |

## 행 뒤로/앞으로 당기기

---

| 명령어 |     기능      |
| :----: | :-----------: |
|  `>`   |  뒤로 당기기  |
|  `<`   | 앞으로 당기기 |

## 창 분할하기

---

|      명령어       |                    기능                    |
| :---------------: | :----------------------------------------: |
|       `:vs`       |     vertical split. 창 수직 분할(좌우)     |
|       `:sp`       |         split. 창 수평 분할(상하)          |
| `Ctrl-w-(방향키)` | 창 분할 상태에서 원하는 위치의 창으로 전환 |
|       `:q`        |                현재 창 닫기                |
|      `:enew`      |               새 창으로 분할               |

## 파일 다루기

---

|    명령어     |                                                      기능                                                       |
| :-----------: | :-------------------------------------------------------------------------------------------------------------: |
| `:n (파일명)` |                                                 신큐 파일 생성                                                  |
| `:o (파일명)` |                                                 신큐 파일 열기                                                  |
|     `:E`      | 현재 작업 중인 파일과 같은 위치의 파일명 출력<br>그 상태에서 원하는 파일 선택 가능<br>각 파일 당 버퍼가 부여 됨 |
| `:e(파일명)`  |                                                 해당 파일 열기                                                  |
|     `:bn`     |                                                다음 버퍼로 이동                                                 |
|     `:bp`     |                                                이전 버퍼로 이동                                                 |
|  `:b(숫자)`   |                                                해당 버퍼로 이동                                                 |
|     `:d`      |                                                 현재 버퍼 닫기                                                  |

## 작업 자동화(매크로)

---

|       명령어        |               기능                |
| :-----------------: | :-------------------------------: |
|   `q(원하는 키)`    | 지금부터 할 작업을 해당 키에 녹화 |
| `(녹화 상태에서)q`  |             녹화 종료             |
| `@(녹화 저장한 키)` |   해당 키에 녹화했던 작업 실행    |
|        `@@`         |          이전 작업 반복           |
|     `(숫자)@@`      |   해당 숫자 만큼 이전 작업 반복   |

## vimrc

---

여러 에디터들마다 개인적인 세팅을 할 수 있듯이, vim 또한 개인 세팅이 가능하다.
바로 `.vimrc`파일을 만들어 사용자 설정을 저장하는 것이다.
사용자 디렉토리인 `~/`에 만들어 저장하면 vim이 알아서 인식해서 설정된다.
단 설정하려면 vim 스크립트 문법을 어느정도 알아야 한다.

또한 플러그인을 통한 커스터마이징 또한 가능한데, `vundle`이란 vim 플러그인을 이용하면 쉽게 여러가지 유용한 플러그인들을 설치할 수 있다.

vimrc 설정에 대한 이야기를 더 다루고 싶지만, 너무 길어질 것 같기에 나중에 따로 다루도록 하겠다.

## 마무리

---

vim은 사용법을 정리한 책이 따로 있을 정도로 방대하고 유용한 기능들이 정말 많다.
여기서 담지 못한 추가적인 기능들이 궁금하다면 다음 사이트에서 더 공부해보자.

<https://www.tutorialspoint.com/vim/index.htm>
